{% extends "base_generic.html" %}

{% block main %}
<div class="col-md-8 main">
  <h1>Event: {{ event.name }}</h1>
  <h1>ID: {{ event.id }}</h1>
  <p><strong>Starts: </strong>{{ event.startDate }}</p>
  <p><strong>Ends: </strong> {{ event.endDate }}</p>
  <p><strong>Description: </strong> {{ event.description }}</p>  
  <p><strong>Tags: </strong> {% for tag in event.tags.all %} {{ tag }}{% if not forloop.last %}, {% endif %}{% endfor %}</p>  
  <p><strong>Attendees: </strong> {% for attendee in event.attendees.all %} {{ attendee }}{% if not forloop.last %}, {% endif %}{% endfor %}</p> 
  {% if user.is_authenticated %}
  	<p><button type="button" class="btn-lg"><a href="{% url 'message-event' event.id %}">Message</a></button></p>
  
  	<p><button type="button" class="btn-lg"><a href="{% url 'rate-event' event.id %}">Rate</a></button></p>	
  	<p>{% if user in event.attendees.all %} 
  		You are going 
  		<p><button type="button" class="btn-lg"><a href="{% url 'unattend-event' event.id %}">Ungo</a></button></p>
  	{% else %}
  	<p><button type="button" class="btn-lg"><a href="{% url 'attend-event' event.id %}">Go</a></button></p>
  	{% endif %}</p>
  {% endif %}
</div> 
  
{% endblock %}

{% block rightbar %}
<div class="col-md-2 right">
	<h3>Ratings for {{ object.name }}</h3>
	<ul>
		{% if rating_list %}
			{% for rating in rating_list %}
				<li>{{ rating.rating }} by {{ rating.username.username }}</li>
			{% endfor %}
		{% else %}
			<li>There is no rating yet for this event.</li>
		{% endif %}
	</ul>
	
	
	<h3>Messages for {{ object.name }}</h3>
	<ul>
		{% if message_list %}
			{% for message in message_list %}
				<li>{{ message.username.username }} says<br> <i> {{ message.comment }} </i></li>
			{% endfor %}
		{% else %}
			<li>There is no message yet for this event.</li>
		{% endif %}
	</ul>
</div>
{% endblock %}